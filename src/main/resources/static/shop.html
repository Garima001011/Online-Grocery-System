<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Shop - Local Grocery</title>
    <link rel="stylesheet" href="/css/style.css?v=5">
</head>
<body>
<div class="container">
    <div class="topbar">
        <div class="brand">
            <div class="logo"></div>
            <div>
                <h1 class="brandTitle">Local Grocery</h1>
                <div class="subTitle">Fast local essentials â€¢ Nepal</div>
            </div>
        </div>
        <div class="pill" id="who"></div>
    </div>

    <div class="grid">
        <div class="card">
            <div class="cardHeader">
                <div>
                    <h2>Browse Products</h2>
                    <div class="muted">Filter by store/category or search items</div>
                </div>
            </div>
            <div class="accentBar"></div>

            <div class="row" style="margin-top:12px;">
                <input id="q" placeholder="Search (e.g., daal, rice, wai wai)">
                <select id="storeSelect"></select>
                <select id="categorySelect"></select>
                <button class="secondary" onclick="applyFilters()">Filter</button>
                <button class="secondary" onclick="resetFilters()">Reset</button>
            </div>

            <div class="list" id="productList"></div>
        </div>

        <div class="card">
            <div class="cardHeader">
                <div>
                    <h2>Your Cart</h2>
                    <div class="muted">Total in NPR (Rs.)</div>
                </div>
            </div>
            <div class="accentBar"></div>

            <div class="list" id="cartList"></div>

            <hr>

            <div class="kpi">
                <div class="box">
                    <div class="val">Rs. <span id="subtotal">0</span></div>
                    <div class="lbl">Subtotal</div>
                </div>
                <div class="box">
                    <div class="val">Rs. <span id="tax">0</span></div>
                    <div class="lbl">Tax (13%)</div>
                </div>
                <div class="box">
                    <div class="val">Rs. <span id="total">0</span></div>
                    <div class="lbl">Total</div>
                </div>
            </div>

            <hr>

            <div class="muted" style="margin-bottom:6px;">Promo code</div>
            <div class="row" style="grid-template-columns: 1fr auto;">
                <input id="promo" placeholder="Enter promo code (e.g., NEPAL10)">
                <button class="secondary" onclick="applyPromo()">Apply</button>
            </div>
            <div class="muted" id="promoMsg" style="margin-top:6px;"></div>

            <hr>

            <div class="muted" style="margin-bottom:6px;">Payment Method</div>
            <div class="row" style="grid-template-columns: 1fr 1fr;">
                <label class="pill" style="justify-content:center; cursor:pointer;">
                    <input type="radio" name="pay" value="COD" checked onchange="togglePayment()" />
                    Cash on Delivery
                </label>
                <label class="pill" style="justify-content:center; cursor:pointer;">
                    <input type="radio" name="pay" value="CARD" onchange="togglePayment()" />
                    Credit / Debit Card
                </label>
            </div>

            <div id="cardBox" class="card" style="margin-top:12px; display:none;">
                <div class="muted">Card details (demo). CVV is not stored.</div>
                <div class="row" style="grid-template-columns: 1fr 1fr; margin-top:10px;">
                    <input id="cardName" placeholder="Name on card">
                    <input id="cardNumber" placeholder="Card number">
                </div>
                <div class="row" style="grid-template-columns: 1fr 1fr 1fr; margin-top:10px;">
                    <input id="cardExp" placeholder="MM/YY">
                    <input id="cardCvv" placeholder="CVV" type="password">
                    <button class="secondary" onclick="validateCard()">Validate</button>
                </div>
                <div class="muted" id="cardMsg" style="margin-top:6px;"></div>
            </div>

            <hr>

            <input id="address" placeholder="Delivery Address (e.g., Itahari-6, Near Sathi Petrol Pump)">
            <div class="row" style="grid-template-columns: 1fr 1fr; margin-top:10px;">
                <button onclick="placeOrder()">Place Order</button>
                <button class="secondary" onclick="logout()">Logout</button>
            </div>
        </div>
    </div>
</div>

<script src="/js/shop.js"></script>
</body>
</html>